
# door-commerce 도메인 모델

### 도메인 만들기
- 듣고 배우기
- '중요한 것'들 찾기(개념 식별)
- '연결 고리' 찾기(관계 정의)
- '것'들을 설명하기(속성 및 기본 행위 명시)
- 그려보기 (시각화)
- 이야기 하고 다듬기 (반복)

## door-commerce 도메인 용어
- 유저 : user 
- 포인트 : point
- 브랜드 : brand
- 상품 : product
- 좋아요 : like
- 주문 : order
- 재고 : stock

  | **한국어** | **영어**  | **설명**                                 |
  |---------|---------|----------------------------------------|
  | 회원      | User    | moon-commerce를 이용하는 고객으로 상품을 주문할 수 있다. |
  | 포인트     | Point   | moon-commerce에서 사용되는 결제 수단이다           |
  | 브랜드     | Brand   | moon-commerce에서 제품을 판매는 업체이다           |
  | 상품      | Product | 유저가 구매할 수 있는 제품이다                      |
  | 재고      | Stock   | 구매가능한 상품의 수량이다                         |
  | 좋아요     | Like    | 유저가 상품에 대해서 좋아요를 할 수 있다.               |
  | 주문      | Order   | 유저가 물건을 사겠다고 약속을 한다.                   |
- | 결제      | Payment | 유저가 약속을 한 상품을 돈으로 구매한다                 |

---
# 도메인 모델
## 유저

## 포인트

## 브랜드 [BRAND] & 상품 [PRODUCT]

### 브랜드 정보 조회
#### [유저 스토리]
- 유저가 브랜드를 클릭하면 브랜드 정보를 조회할 수 있다.
- 브랜드의 상품 목록과 함께 조회된다.

#### [기능 흐름]
1. 유저가 브랜드를 선택한다.
2. 시스템은 해당 브랜드의 정보를 조회한다. 
3. 시스템이 브랜드 ID에 해당되는 브랜드가 없으면 NOT_FOUND 예외를 발생시킨다.
4. 브랜드 정보에는 브랜드 ID, 브랜드 이름, 브랜드 설명, 이미지 등의 정보가 포함된다.
#### [예외 사항]
| **예외 사항**        | **에러코드** | 
  |------------------|----------|
| 브랜드 ID가 존재하지 않는다 | 404      | 

## 상품 [PRODUCT]
### 상품 목록 조회
#### [유저 스토리]
- 유저는 상품 목롤을 조회할 수 있다.
- 상품은 정렬 조건에 따라 정렬된다.
- 상품은 20개씩 페이지로 나눠서 조회된다.
- 특정 브랜드의 상품만 조회할 수 있다.
- 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다.

#### [기능 흐름]
1. 유저가 상품 목록 조회를 요청한다. 
2. 시스템은 요청에 따라 페이지 네이션, 브랜드 필터링, 정렬 기준을 적용하여 상품 목록을 조회한다. 
3. 각 상품 목록에는 상품 ID, 상품 이름, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보가 포함된다.
#### [예외 사항]
| **예외 사항**           | **에러코드** | 
|---------------------|----------|
| 상품 목록이 더이상 존재하지 않는다 | 404      | 

### 상품 정보 조회
#### [유저 스토리]
- 유저는 보고 싶은 상품을 클릭하면 상품의 상세 정보를 조회할 수 있다.
- 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다.

#### [기능 흐름]
1. 유저가 상품 ID로 조회를 요청한다.
2. 시스템은 해당 상품의 정보를 조회한다. 
3. 시스템은 상품 이름, 설명, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보를 반환한다. 
4. 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다. 
5. 시스템이 상품 ID에 해당되는 상품이 없으면 NOT_FOUND 예외를 발생시킨다. 
6. 상품 정보에는 상품 ID, 상품 이름, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보가 포함된다.

#### [예외 사항]
| **예외 사항**             | **에러코드** | 
|-----------------------|----------|
| ID에 해당하는 상품이 존재하지 않는다 | 404      | 

## 좋아요 [LIKE]
### 상품 좋아요
#### [유저 스토리]
- 유저는 상품에 좋아요를 등록할 수 있다.
- 좋아요는 상품의 고유 ID로 등록할 수 있다.
- 좋아요를 등록하면 해당 상품의 좋아요 수가 증가한다.
- 이미 좋아요를 등록한 상품에 대해 다시 좋아요를 등록해도 좋아요 수가 증가하지 않는다.

#### [기능 흐름]
1. 로그인 한 사용자만 사용 가능하다.
2. 유저가 상품 ID로 좋아요 등록을 요청한다.
3. 시스템은 존재 여부를 판단한다.
4. 존재하면 성공 여부만 반환한다.
5. 존재하지 않으면 좋아요 등록 후 성공 여부를 반환한다.

#### [예외 사항]
| **예외 사항**             | **에러코드** | 
|-----------------------|----------|
| ID에 해당하는 상품이 존재하지 않는다 | 404      | 
| 로그인되지 않은 유저이다         | 401      | 

### 상품 좋아요 취소
#### [유저 스토리]
- 유저는 좋아요한 상품에 좋아요를 취소할 수 있다.
- 좋아요가 되지 않은 상품은 취소 할 수 없다.
- 좋아요를 취소하면 해당 상품의 좋아요 수가 감소한다.

#### [기능 흐름]
1. 로그인 한 사용자만 사용 가능하다.
2. 유저가 좋아요를 한 상품을 상품 ID로 좋아요 취소를 요청한다.
3. 시스템은 해당 상품의 좋아요 상태를 확인한다.
4. 좋아요가 등록되어 있지 않으면 200 OK를 반환한다.
5. 좋아요가 등록되어 있으면 좋아요를 삭제한 후 좋아요 수를 감소시킨다.
#### [예외 사항]
   | **예외 사항**             | **에러코드** |
   |-----------------------|----------|
   | ID에 해당하는 상품이 존재하지 않는다 | 404      |
   | 로그인되지 않은 유저이다         | 401      |

### 내가 좋아요 한 상품 목록 조회
#### [유저 스토리]
- 유저는 자신의 좋아요 상품 목록을 조회할 수 있다.
- 좋아요 상품 목록은 20개씩 페이지로 나눠서 조회된다.

#### [기능 흐름]
1. 로그인 한 유저만 사용 가능하다.
2. 유저가 좋아요 상품 목록 조회를 요청한다.
3. 시스템은 유저의 좋아요 상품 목록을 조회한다.
4. 시스템은 상품 정보를 포함한 목록을 반환한다.
5. 상품 정보에는 상품 ID, 상품 이름, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보가 포함된다.
#### [예외 사항]
| **예외 사항**             | **에러코드** |
   |-----------------------|----------|
| 좋아요 목록이 더 이상 존재하지 않는다 | 404      |
| 로그인되지 않은 유저이다         | 401      |

## 주문 / 결제 [ORDER]
### 주문 요청
#### [유저 스토리]
- 유저는 상품을 장바구니에 담고 주문을 요청할 수 있다.
- 유저는 가격을 확인하고 잔여 포인트로 결제를 진행한다.
- 결제를 완료하면 주문서를 받고 주문이 완료된다.

#### [기능 흐름]
1. 로그인 한 유저만 사용 가능하다.
2. 유저가 주문할 상품을 장바구니에 담는다.
3. 장바구니에 담긴 상품을 주문 요청한다.
4. 시스템은 주문을 생성하고 총 주문 금액을 계산한다.
5. 시스템은 포인트를 확인하고 주문 금액 만큼 포인트를 차감한다
6. 포인트가 주문 금액보다 적으면 INSUFFICIENT_BALANCE(400 BadRequest) 예외를 발생시키고 주문을 취소한다.
7. 시스템은 주문 상품의 재고를 확인하고 재고를 차감한다.
8. 재고가 충분하지 않으면 OUT_OF_STOCK(400 BadRequest) 예외를 발생시키고 주문을 취소고 사용한 포인트를 취소한다.
12. 상품이 판매 상태가 아니면 409 CONFLICT 예외를 발생시킨다.

#### [예외 사항]
| **예외 사항**        | **에러코드** |
   |------------------|----------|
| 주문할 상품이 존재하지 않는다 | 404      |
| 재고가 부족하다         | 409      |
| 잔여 포인트가 부족하다     | 409      |
| 상품이 판매 상태가 아니다    | 409      |
| 로그인되지 않은 유저이다    | 401    |

### 유저 주문 목록 조회
#### [유저 스토리]
- 유저는 자신의 주문 목록을 조회할 수 있다.
- 주문은 20개씩 페이지로 나눠서 조회된다.
- 정렬은 항상 최신순으로 조회된다.(최신순이 아닐 이유가 없을 것 같음)

#### [기능 흐름]
1. 로그인 한 유저만 사용 가능하다.
2. 유저가 주문 목록 조회를 요청한다.
3. 시스템은 유저의 주문 목록을 조회한다.
4. 시스템은 간략한 주문(주문 ID, 가격, 상품명)에 대한 정보를 반환한다.
#### [예외 사항]
| **예외 사항**            | **에러코드** |
|----------------------|----------|
| 주문 내역이 더 이상 존재하지 않는다 | 404      |
| 로그인되지 않은 유저이다         | 401      |

### 주문 상세 조회
#### [유저 스토리]
- 유저는 주문의 상세 정보를 조회할 수 있다.

#### [기능 흐름]
1. 로그인 한 유저만 사용 가능하다.
2. 유저가 주문을 클릭해 주문 상세 조회를 요청한다.
3. 시스템은 해당 주문의 상세 정보를 조회한다.
4. 주문이 존재하고 해당 유저의 주문이면 주문 상세 정보를 반환한다.
5. 주문이 존재하지 않으면 NOT_FOUND 예외를 발생시킨다.
6. 주문이 해당 유저의 주문이 아니면 FORBIDDEN 예외를 발생시킨다.
7. 주문 상세 정보에는 주문 ID, 주문 상태, 주문 상품 목록, 결제 정보(결제 금액), 주문 일시 등이 포함된다.
#### [예외 사항]
| **예외 사항**             | **에러코드** |
   |-----------------------|----------|
| ID에 해당하는 주문이 존재하지 않는다 | 404      |
| 로그인되지 않은 유저이다         | 401      |
| 유저의 주문이 아니다 | 403      |


