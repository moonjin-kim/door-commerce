
# door-commerce 도메인 모델

### 도메인 만들기
- 듣고 배우기
- '중요한 것'들 찾기(개념 식별)
- '연결 고리' 찾기(관계 정의)
- '것'들을 설명하기(속성 및 기본 행위 명시)
- 그려보기 (시각화)
- 이야기 하고 다듬기 (반복)

## door-commerce 도메인 용어
- 유저 : user 
- 포인트 : point
- 브랜드 : brand
- 상품 : product
- 좋아요 : like
- 주문 : order
- 재고 : stock

  | **한국어** | **영어**  | **설명**                                 |
  |---------|---------|----------------------------------------|
  | 회원      | User    | moon-commerce를 이용하는 고객으로 상품을 주문할 수 있다. |
  | 포인트     | Point   | moon-commerce에서 사용되는 결제 수단이다           |
  | 브랜드     | Brand   | moon-commerce에서 제품을 판매는 업체이다           |
  | 상품      | Product | 유저가 구매할 수 있는 제품이다                      |
  | 재고      | Stock   | 구매가능한 상품의 수량이다                         |
  | 좋아요     | Like    | 유저가 상품에 대해서 좋아요를 할 수 있다.               |
  | 주문      | Order   | 유저가 물건을 사겠다고 약속을 한다.                   |
- | 결제      | Payment | 유저가 약속을 한 상품을 돈으로 구매한다                 |

---
# 도메인 모델
## 유저

## 포인트
---
## 브랜드 [BRAND] & 상품 [PRODUCT]

### 브랜드 정보 조회
#### [유저 스토리]
- 유저가 브랜드를 클릭하면 브랜드 정보를 조회할 수 있다.
- 브랜드의 상품 목록과 함께 조회된다.

#### [해피 케이스]
- 사용자는 특정 브랜드의 정보를 조회할 수 있다.
- 브랜드 ID로 브랜드 이름, 정보, 이미지 등을 확인할 수 있다.
- 영업 중인 브랜드 만 조회 가능하다
#### [실패 케이스]
- 존재하지 않는 브랜드 ID로 조회할 경우 NOT_FOUND 예외가 발생한다.
- 브랜드가 조회 가능상태가 아니면 BAD_REQUEST 예외가 발생한다.

## 상품 [PRODUCT]
### 상품 목록 조회
#### [유저 스토리]
- 유저는 상품 목록을 조회할 수 있다.
- 상품은 정렬 조건에 따라 정렬된다.(최신순, 가격 낮은 순, 가격 높은 순 등)
- 상품은 페이지 형식으로 조횐된다.
- 특정 브랜드의 상품을 필터 옵션으로 조회할 수 있다.
- 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다.

#### [해피 케이스]
- 사용자는 상품의 목록을 Page 단위로 조회할 수 있다.
- 상품 목록은 상품 ID, 상품 이름, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보를 포함한다.
- 사용자는 판매중 상품 목록을 조회할 수 있다.
- 정렬 조건의 기본 값은 최신순이다.
- 페이지 크기의 기본값은 20개이다.
- 로그인 한 유저이면 각 상품의 좋아요 상태를 확인할 수 있다.
#### [실패 케이스]
- 페이지의 번호가 0보다 작으면 BAD_REQUEST 예외가 발생한다.
- 정렬 조건이 잘못되면 BAD_REQUEST 예외가 발생한다.

### 상품 정보 조회
#### [유저 스토리]
- 유저는 보고 싶은 상품을 클릭하면 상품의 상세 정보를 조회할 수 있다.
- 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다.
#### [해피 케이스]
- 유저는 상품 ID로 상품의 상세 정보를 조회할 수 있다.
- 상품의 상세 정보는 상품 이름, 설명, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보를 포함한다.
- 로그인 한 유저는 각 상품의 좋아요 상태를 확인할 수 있다.
- 로그인 한 유저가 아니면 좋아요 상태는 알 수 없다.
#### [실패 케이스]
- 존재하지 않는 상품 ID로 조회할 경우 NOT_FOUND 예외가 발생한다.
- 상품이 판매중이지 않으면 BAD_REQUEST 예외가 발생한다.

---
## 좋아요 [LIKE]
### 상품 좋아요
#### [해피 케이스]
- 유저는 상품에 좋아요를 등록할 수 있다.
- 좋아요는 상품의 고유 ID로 등록할 수 있다.
- 좋아요를 등록하면 해당 상품의 좋아요가 추가된다.
- 이미 좋아요를 등록한 상품에 대해 다시 좋아요를 등록해도 좋아요가 새로 추가되지 않는다. (멱등성)
#### [실패 케이스]
- 존재하지 않는 상품 ID로 좋아요를 등록할 경우 NOT_FOUND 예외가 발생한다.
- 로그인하지 않은 유저가 좋아요를 등록할 경우 UNAUTHORIZED 예외가 발생한다.
- 상품이 판매중이지 않으면 CONFLICT 예외가 발생한다.

### 상품 좋아요 취소
#### [해피 케이스]
- 유저는 상품에 등록한 좋아요를 취소할 수 있다.
- 좋아요 취소는 상품의 고유 ID로 취소할 수 있다.
- 좋아요를 취소하면 해당 상품의 좋아요가 삭제된다.
- 좋아요를 하지않은 상품에 대해 좋아요 취소를 요청하면 아무런 동작도 하지 않는다. (멱등성)
#### [실패 케이스]
- 존재하지 않는 상품 ID로 좋아요를 취소할 경우 NOT_FOUND 예외가 발생한다.
- 로그인하지 않은 유저가 좋아요를 취소할 경우 UNAUTHORIZED 예외가 발생한다.

### 내가 좋아요 한 상품 목록 조회
#### [유저 스토리]
- 유저는 자신의 좋아요 상품 목록을 조회할 수 있다.
- 좋아요 상품 목록은 20개씩 페이지로 나눠서 조회된다.

#### [해피 케이스]
- 사용자는 좋아요한 상품의 목록을 Page 단위로 조회할 수 있다.
- 상품 목록은 상품 ID, 상품 이름, 가격, 이미지, 브랜드 ID, 좋아요 수, 재고 등의 정보를 포함한다.
- 페이지 크기의 기본값은 20개이다.
- 정렬 조건은 좋아요 최신순으로 조횐된다.
#### [실패 케이스]
- 페이지의 번호가 0보다 작으면 BAD_REQUEST 예외가 발생한다.
- 정렬 조건이 잘못되면 BAD_REQUEST 예외가 발생한다.
---
## 주문 / 결제 [ORDER]
### 주문 요청
#### [유저 스토리]
- 유저는 상품을 장바구니에 담고 주문을 요청할 수 있다.
- 유저는 가격을 확인하고 잔여 포인트로 결제를 진행한다.
- 결제를 완료하면 주문서를 받고 주문이 완료된다.

#### [해피 케이스]
- 유저는 판매중 상품 ID와 수량을 포함한 리스트로 주문 요청을 할 수 있다.
- 주문 요청 시 유저의 잔여 포인트를 확인하고 주문 금액 만큼 포인트를 차감한다.
- 주문 요청시 유저는 결제 요청을 하여 결제 내역을 저장한다.
- 주문 요청시 유저는 주문 상품의 재고를 차감한다.
#### [실패 케이스]
- 상품 리스트 중 존재하지 않는 상품이 있으면 NOT_FOUND 예외가 발생한다.
- 상품 리스트 중 재고가 부족한 상품이 있으면 OUT_OF_STOCK 예외가 발생한다.
- 상품 리스트 중 판매중이지 않은 상품이 있으면 CONFLICT 예외가 발생한다.
- 유저의 잔여 포인트가 주문 금액보다 적으면 INSUFFICIENT_BALANCE 예외가 발생한다.
- 결제에 실패하면 PAYMENT_FAILED 예외가 발생한다.
- 주문 중에 예외가 발생하면 주문을 취소하고 사용한 포인트를 취소/ 상품 재고 차감 취소/ 결제 취소 등의 롤백 처리를 한다.

### 유저 주문 목록 조회
#### [유저 스토리]
- 유저는 자신의 주문 목록을 조회할 수 있다.
- 주문은 20개씩 페이지로 나눠서 조회된다.
- 정렬은 항상 최신순으로 조회된다.(최신순이 아닐 이유가 없을 것 같음)

#### [해피 케이스]
- 유저의 주문 목록을 Page 단위로 조회할 수 있다.
- 주문 목록은 주문 ID, 가격, 상품명 등의 간략한 정보를 포함한다.
- 페이지 크기의 기본값은 20개이다.
- 정렬 조건은 항상 최신순으로 조회된다.
#### [실패 케이스]
- 로그인 하지 않은 유저가 주문 목록을 조회할 경우 UNAUTHORIZED 예외가 발생한다.


### 주문 상세 조회
#### [유저 스토리]
- 유저는 주문의 상세 정보를 조회할 수 있다.

#### [해피 케이스]
- 유저가 주문한 주문 ID로 주문의 상세 정보를 조회할 수 있다.
- 주문의 상세 정보는 주문 ID, 주문 상태, 주문 상품 목록, 결제 정보, 사용한 포인트 등을 포함한다.
#### [실패 케이스]
- 유저가 주문하지 않은 주문 ID로 조회할 경우 FORBIDDEN 예외가 발생한다.
- 존재하지 않은 주문 ID로 조회할 경우 NOT_FOUND 예외가 발생한다.


